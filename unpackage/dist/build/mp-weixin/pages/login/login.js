"use strict";const e=require("../../common/vendor.js"),n={data:()=>({title:"Hello",username:"",password:"",token:""}),onLoad(){e.index.getStorageSync("uni_id_token")&&(this.token=e.index.getStorageSync("uni_id_token"))},methods:{req:(n,t)=>new Promise(((o,s)=>{e.Ds.callFunction({name:"user-center",data:{action:n,params:t},success:e=>{o(e.result)},fail:e=>{s(e.result)}})})),register(){this.req("register",{username:this.username,password:this.password}).then((n=>{e.index.setStorageSync("uni_id_token",n.token),e.index.setStorageSync("uni_id_token_expired",n.tokenExpired),this.token=n.token})).catch((e=>{console.log(e)}))},login(){this.req("login",{username:this.username,password:this.password}).then((n=>{console.log(n.userInfo.username),e.index.setStorageSync("uni_id_token",n.token),e.index.setStorageSync("username",n.username),e.index.setStorageSync("uni_id_token_expired",n.tokenExpired),this.token=n.token}))},logout(){this.req("logout",{}).then((n=>{console.log(n),this.token="",e.index.setStorageSync("uni_id_token",""),e.index.setStorageSync("username",""),e.index.setStorageSync("uni_id_token_expired","")}))}}};const t=e._export_sfc(n,[["render",function(n,t,o,s,r,i){return e.e({a:!r.token},r.token?r.token?{i:e.o((e=>i.logout()))}:{}:{b:r.username,c:e.o((e=>r.username=e.detail.value)),d:r.password,e:e.o((e=>r.password=e.detail.value)),f:e.o((e=>i.register())),g:e.o((e=>i.login()))},{h:r.token})}]]);wx.createPage(t);
